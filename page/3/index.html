<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>naive的博客</title><meta name="author" content="naive"><meta name="copyright" content="naive"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="欢迎访问naive的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="naive的博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="naive的博客">
<meta property="og:description" content="欢迎访问naive的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="naive">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/page/3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'naive的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-03-19 13:29:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="naive的博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">130</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/./img/preview.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">naive的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">naive的博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/1426768270" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:liuqi8270@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/14/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/" title="集群安全机制">     <img class="post_bg" src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="集群安全机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/14/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/" title="集群安全机制">集群安全机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-14T13:16:00.000Z" title="发表于 2021-11-14 21:16:00">2021-11-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概述kubernetes通过API Server 的认证授权、准入控制机制及保护敏感信息的 Secret 机制等。
有以下几个目标：

保证容器与其所在的宿主机的隔离。
限制容器给基础设施及其他容器带来消极影响的能力。
最小权限原则一一合理限制所有组件的权限，确保组件只执行它被授权的行为，通过限制单个组件的能力来限制它所能到达的权限范围。
明确组件间边界的划分。
划分普通用户和管理员的角色。
在必要时允许将管理员权限赋给普通用户。
允许拥有“ Secret ”数据（ Keys Certs Passwords ）的应用在集群中运行。

二、API Server 认证管理（Authentication)Kubernetes 集群中所有资源的访问和变更都是通过kubernetes API Server 的REST API 来实现的，所以集群安全的关键点就在于如何识别并认证客户端身份（ Authentication ），以及随后访问权限的授权（ Authorization ）
Kubernetes 集群提供了3种级别的客户端身份认证方式。

HTTPS 证书认证：基于 CA 根证书签名的双 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/11/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kube-proxy%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kube-proxy运行机制分析">     <img class="post_bg" src="/./img/photo-1625777719130-0a8e07086117.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kube-proxy运行机制分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/11/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kube-proxy%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kube-proxy运行机制分析">kube-proxy运行机制分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-11T14:36:55.000Z" title="发表于 2021-11-11 22:36:55">2021-11-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概念Kubernetes 在创建服务时会为服务分配一个虚拟的IP地址，客户端通过访问这个虚拟的 IP地址来访问服务，而服务则负责将请求转发到后端的 Pod 上。这就是 个反向代理。但是，它和普通的反向代理有一些不同：首先它的IP地址是虚拟的，想从外面访问还需要一些技巧；其次是它的部署和启停是 Kubernetes 统一自动管理的。
真正将 Service 的作用落实的是背后的 kube-proxy 服务进程。
Kubernetes 集群的每个 Node 上都会运行一个 kube-proxy 服务进程，这个进程可以看作Service 的透明代理兼负载均衡器，其核心功能是将到某个 Service 的访问请求转发到后端的Pod 实例上。对每一个 TCP 类型的 Kubernetes Service, kube-proxy 都会在本地 Node 上建一个 SocketServer 来负责接收请求，然后均匀发送到后端某个 Pod 的端口上，这个过程默认采Round Robin 负载均衡算法。另外 Kubernetes 也提供通过修改 Service 的 service.spec.sessio ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kubelet%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kubelet运行机制分析">     <img class="post_bg" src="/./img/photo-1442522772768-9032b6d10e3e.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kubelet运行机制分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kubelet%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kubelet运行机制分析">kubelet运行机制分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-08T15:19:17.000Z" title="发表于 2021-11-08 23:19:17">2021-11-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、简介每个 Node 节点（又称 Minion ）上都会启动 kubelet 服务进程。该进程用于处理 Master 节点下发到本节点的任务，管理 Pod及Pod 中的容器。每个Kubelet会在 API Server 上注册节点自身信息，定期向 Master 节点汇报节点资源的使用情况，并通过cAdvisor 监控容器和节点资源。
二、节点管理点通过设置 kubelet 启动参数--register-node ，来决定是否向 API Server 注册自己.注册时包括以下参数

--api-servers: API Server 的位置。
--kubeconfig: kubeconfig 文件，用于访问 API Server 的安全配置文件
--cloud-provider ：云服务商IaaS地址，仅用于公有云环境

每个 kubelet 被授予创建和修改任何节点的权限。但是在实践中，它仅仅创建和修改自己。
三、Pod管理kubelet 通过以下几种方式获取自身 Node 上所要运行的 Pod 清单。

文件： kubelet 启动参数 “--config ”指定的配置文件目录下的 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Scheduler%E5%8E%9F%E7%90%86/" title="Scheduler原理">     <img class="post_bg" src="/./img/photo-1625777719130-0a8e07086117.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Scheduler原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Scheduler%E5%8E%9F%E7%90%86/" title="Scheduler原理">Scheduler原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-08T13:26:48.000Z" title="发表于 2021-11-08 21:26:48">2021-11-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、简介Scheduler 在整个系统中承担了“承上启下”的重要功能，“承上”是指它负则接收Controller Manager 创建的新 Pod，为它找到目标Node ，“启下”是指安置工作完成后，目标 Node 上的 kubelet 务进程接管后继工作，负 Pod 生命周期中的“下半生”
Scheduler 的作用是将待调度的 Pod (API 新创建的 Pod 、ControllerManager 为补足副本而创建的 Pod 等）按照特定的调度算法和调度策略绑定（ Binding ）到集群中的某个合适的 Node 上，并将绑定信息写入 etcd 中。在整个调度过程中涉及 3个对象，分别是：待调度 Pod 列表、可用 Node 列表，以及调度算法和策略 。简单地说，就是通过调度算法调度为待调度 Pod 列表的每个 Pod 从Node 列表中选择一个最适合的 Node，随后目标节点上的kubelet通过API Server监听到Pod的绑定事件，获取对应Pod清单，下载Image,启动容器。


二、调度流程
预选调度过程，即遍历所有目标 Node ，筛选出符合要求的候选节点。
确定 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/07/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/ControllerManager/" title="Controller Manager">     <img class="post_bg" src="/./img/photo-1628009193228-076ab63d655a.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Controller Manager"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/07/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/ControllerManager/" title="Controller Manager">Controller Manager</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-07T13:46:18.000Z" title="发表于 2021-11-07 21:46:18">2021-11-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概述为集群内部的管理控制中心，负责集群内的 Node 、Pod 副本、服务端点（ Endpoint ）、命名空间（ Namespace ）、服务账号（ ServiceAccount ）、资源定额（ ResourceQuota) 等的管理，当某个 Node 意外岩机时， Controller Manager 会及时发现此故障并执行自动化修复流程，确保集群始终处于预期的工作状态。
主要包括：
12345678Replication Controller Node ControllerResourceQuota Controller Namespace Controller ServiceAccount Controller Token ControllerService Controller Endpoint Controller

在 Kubernetes 集群中，每个 Controller 都是不断修正系统的工作状态，它们通过API Server 提供的接口实时监控整个集群里的每个资源对象的当前状态，当发生各种故障导致系统状态发生变化时，会尝试着将系统状态从“现有状态”修正到“期望 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/07/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/KubernetesAPIServer/" title="Kubernetes API SERVER">     <img class="post_bg" src="/./img/photo-1465188162913-8fb5709d6d57.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kubernetes API SERVER"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/07/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/KubernetesAPIServer/" title="Kubernetes API SERVER">Kubernetes API SERVER</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-07T09:48:11.000Z" title="发表于 2021-11-07 17:48:11">2021-11-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概述Kubernetes API Server 的核心功能是提供了 Kubernetes 各类资源对象（如 PodRC Service 等〉的增、删、改、查及 Watch HTTP Rest 接口，成为集群内各个功能模块之间数据交互和通信的中心枢纽，是整个系统的数据总线和数据中心。

集群管理的 API 入口。
资源配额控制的入口。
提供了完备的集群安全机制。

通过一个个名为 kube-apiserver 的进程提供服务，该进程运行在 Master节点上。默认情况会在8080端口（-- insecure-port）提供REST服务。可以同时启动 HTTPS 安全端口（ --secure＝6443 ）来启动安全机制。
命令行工具kubectl就是与API Server进行交互的
如果我们想对外暴露部分 REST 服务，则可以在 Master 或其他任何节点上通过运行kubectl proxy 程启动一个 部代理来实现。
12345#运行下面的命令，在8001端口启动代理，并且拒绝客户端访问RC的API:kubectl proxy --reject-paths=&quot;^/api ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/03/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E6%B7%B1%E5%85%A5Service/" title="深入Service">     <img class="post_bg" src="/./img/photo-1626811407568-2f41c53fff99.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入Service"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/03/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E6%B7%B1%E5%85%A5Service/" title="深入Service">深入Service</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-03T13:18:58.000Z" title="发表于 2021-11-03 21:18:58">2021-11-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、Service定义通过创建 Service ，可以为一组具有相同功能的容器应用提供一个统一的入口地址，井且将请求负载分发到后端的各个容器应用上。
12345678910111213141516171819202122232425apiVersion : vl         #Requiredkind: Service           #Requiredmetadata:               #Required  name : string         #Required  namespace : string    #Required  labels:   - name: string   annotations:   - name: string spec :                  #Required  selector : []         #Required  type : string         #Required  clusterIP: string  sessionAffinity: string   ports:   - nam ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/02/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Pod%E6%89%A9%E5%AE%B9%E5%92%8C%E7%BC%A9%E5%AE%B9/" title="Pod扩容和缩容">     <img class="post_bg" src="/./img/photo-1465188162913-8fb5709d6d57.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pod扩容和缩容"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/02/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Pod%E6%89%A9%E5%AE%B9%E5%92%8C%E7%BC%A9%E5%AE%B9/" title="Pod扩容和缩容">Pod扩容和缩容</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-02T15:15:31.000Z" title="发表于 2021-11-02 23:15:31">2021-11-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">Pod 的扩容和缩容操作有手动和自动两种模式，手动模式通过执行 kubectl scale 命令对一个 Deployment/RC 进行 Pod 副本数量设置。自动模式则需要用户根据某个性能指标或者自定义业务指标 Pod 副本数量的范围，系统将自动在这个范围内根据性能指标 进行调整。
一、手动扩容和缩容12345将Deployment nginx数量提升到5个kubectl scale deployment nginx-deployment --replicas=5#－－replicas 设置为比当前 Pod 副本数量更小的数 系统将会杀掉一些运行中的 Podkubectl scale deployment nginx-deployment --replicas=1



二、自动扩容和缩容Horizontal Pod Autoscaler（ HPA） ，用于实现基于 CPU 使用率进行自动 Pod 扩容和缩 的功能。HPA制器基于 Master的kube-controller-manager 服务启动参数 horizontal- pod-autoscaler-sync-period  ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/01/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Pod%E5%8D%87%E7%BA%A7%E5%92%8C%E5%9B%9E%E6%BB%9A/" title="Pod升级和回滚">     <img class="post_bg" src="/./img/photo-1626277787644-47d530591292.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pod升级和回滚"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/01/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Pod%E5%8D%87%E7%BA%A7%E5%92%8C%E5%9B%9E%E6%BB%9A/" title="Pod升级和回滚">Pod升级和回滚</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-01T14:58:09.000Z" title="发表于 2021-11-01 22:58:09">2021-11-01</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">当集群中的某个服务需要升级时，我们需要停止目前与该服务相关的所有 Pod ，然后下载新版本镜像井创建新的 Pod 如果集群规模比较大，则这个工作就变成了一个挑战，而且先全部停止然后逐步升级的方式会导致较长时间的服务不可用 Kubernetes 提供了滚动升级功能来解决上述问题。
如果 Pod 是通过 Deployment 建的，则用户可以在运行时修改 Deployment的Pod 定义(spec.template ）或镜像名称 ，井应用到 Deployment 对象上，系统即可完成 Deployment 的自动更新操作。如果在更新过程中发生了错误， 则还可以通过回滚（ Rollback ）操作恢复 Pod的版本。
一、Deployment升级Deployment nginx
1234567891011121314151617#nginx-deployment.yaml apiVersion: apps/v1beta1 kind : Deployment metadata:   name: nginx-deploymentspec:   replicas: 3   template :  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/10/30/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E6%B7%B1%E5%85%A5Pod/" title="深入Pod">     <img class="post_bg" src="/./img/photo-1465188162913-8fb5709d6d57.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="深入Pod"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/10/30/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E6%B7%B1%E5%85%A5Pod/" title="深入Pod">深入Pod</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-10-30T14:56:06.000Z" title="发表于 2021-10-30 22:56:06">2021-10-30</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、Pod 定义详解pod的定义文件完整内容：
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576apiVersion : vl kind: Pod metadata :   name : string   namespace: string   labels:     - name: string   annotations:     - name: stringspec:   containers:   - name : string    image : string     imagePullPolicy: [Always | Never | IfNotPresent]     command : [string]     args: [string]     workingDir: string     volumeMounts:        ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/#content-inner">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/#content-inner">13</a><a class="extend next" rel="next" href="/page/4/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">naive</div><div class="author-info__description">欢迎访问naive的博客</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">130</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">37</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1426768270"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1426768270" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:liuqi8270@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到navie的博客</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/03/12/Go/Go%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%8F%8D%E5%B0%84%E5%92%8C%E7%BD%91%E7%BB%9C/" title="Go文件测试反射和网络"><img src="/./img/photo-1465188162913-8fb5709d6d57.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go文件测试反射和网络"/></a><div class="content"><a class="title" href="/2022/03/12/Go/Go%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%8F%8D%E5%B0%84%E5%92%8C%E7%BD%91%E7%BB%9C/" title="Go文件测试反射和网络">Go文件测试反射和网络</a><time datetime="2022-03-12T08:38:16.000Z" title="发表于 2022-03-12 16:38:16">2022-03-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/23/Go/Go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="Go面向对象"><img src="/./img/photo-1626427832435-d6c500cc2686.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go面向对象"/></a><div class="content"><a class="title" href="/2022/02/23/Go/Go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="Go面向对象">Go面向对象</a><time datetime="2022-02-23T14:52:21.000Z" title="发表于 2022-02-23 22:52:21">2022-02-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/21/Go/%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87%E5%92%8Cmap/" title="数组、切片和map"><img src="/./img/photo-1627819376920-9faac124cf13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数组、切片和map"/></a><div class="content"><a class="title" href="/2022/02/21/Go/%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87%E5%92%8Cmap/" title="数组、切片和map">数组、切片和map</a><time datetime="2022-02-21T13:06:06.000Z" title="发表于 2022-02-21 21:06:06">2022-02-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/20/Go/Go%E7%AE%80%E4%BB%8B/" title="Go简介"><img src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go简介"/></a><div class="content"><a class="title" href="/2022/01/20/Go/Go%E7%AE%80%E4%BB%8B/" title="Go简介">Go简介</a><time datetime="2022-01-20T09:47:21.000Z" title="发表于 2022-01-20 17:47:21">2022-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/" title="设计模式-职责链模式"><img src="/./img/photo-1626427832435-d6c500cc2686.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式-职责链模式"/></a><div class="content"><a class="title" href="/2022/01/18/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/" title="设计模式-职责链模式">设计模式-职责链模式</a><time datetime="2022-01-18T15:21:05.000Z" title="发表于 2022-01-18 23:21:05">2022-01-18</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Netty/"><span class="card-category-list-name">Netty</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Spring/"><span class="card-category-list-name">Spring</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Vue/"><span class="card-category-list-name">Vue</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java%E5%9F%BA%E7%A1%80/"><span class="card-category-list-name">java基础</span><span class="card-category-list-count">19</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/leetcode/"><span class="card-category-list-name">leetcode</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/redis/"><span class="card-category-list-name">redis</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"><span class="card-category-list-name">云原生</span><span class="card-category-list-count">20</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size: 1.45em; color: rgb(32, 7, 160)">java</a><a href="/tags/jvm/" style="font-size: 1.33em; color: rgb(56, 127, 59)">jvm</a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.3em; color: rgb(29, 178, 166)">多线程</a><a href="/tags/java%E9%9B%86%E5%90%88/" style="font-size: 1.21em; color: rgb(54, 151, 190)">java集合</a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.27em; color: rgb(54, 19, 44)">前端</a><a href="/tags/html/" style="font-size: 1.15em; color: rgb(93, 28, 67)">html</a><a href="/tags/redis/" style="font-size: 1.18em; color: rgb(116, 32, 68)">redis</a><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 1.15em; color: rgb(165, 113, 45)">读书笔记</a><a href="/tags/hadoop/" style="font-size: 1.15em; color: rgb(96, 2, 97)">hadoop</a><a href="/tags/mysql/" style="font-size: 1.21em; color: rgb(37, 6, 33)">mysql</a><a href="/tags/springboot/" style="font-size: 1.15em; color: rgb(166, 2, 134)">springboot</a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.15em; color: rgb(91, 37, 163)">注解</a><a href="/tags/shiro/" style="font-size: 1.15em; color: rgb(119, 72, 2)">shiro</a><a href="/tags/swagger2/" style="font-size: 1.15em; color: rgb(60, 109, 5)">swagger2</a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.42em; color: rgb(162, 112, 172)">设计模式</a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.27em; color: rgb(3, 194, 128)">笔记</a><a href="/tags/SpringSecurity/" style="font-size: 1.21em; color: rgb(98, 160, 125)">SpringSecurity</a><a href="/tags/git/" style="font-size: 1.18em; color: rgb(127, 84, 178)">git</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(127, 166, 144)">算法</a><a href="/tags/%E7%AE%97%E6%B3%95%E5%BC%8F/" style="font-size: 1.15em; color: rgb(18, 6, 144)">算法式</a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.15em; color: rgb(31, 100, 25)">网络</a><a href="/tags/Vue%E5%9F%BA%E7%A1%80/" style="font-size: 1.21em; color: rgb(122, 43, 6)">Vue基础</a><a href="/tags/jQuery/" style="font-size: 1.15em; color: rgb(88, 52, 42)">jQuery</a><a href="/tags/SpringCloud/" style="font-size: 1.15em; color: rgb(43, 158, 24)">SpringCloud</a><a href="/tags/ActiveMQ/" style="font-size: 1.15em; color: rgb(85, 74, 71)">ActiveMQ</a><a href="/tags/k8s/" style="font-size: 1.36em; color: rgb(56, 164, 54)">k8s</a><a href="/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/" style="font-size: 1.39em; color: rgb(120, 56, 108)">容器云</a><a href="/tags/TypeScript/" style="font-size: 1.15em; color: rgb(72, 40, 76)">TypeScript</a><a href="/tags/vue3/" style="font-size: 1.15em; color: rgb(18, 110, 50)">vue3</a><a href="/tags/axios/" style="font-size: 1.15em; color: rgb(73, 57, 193)">axios</a><a href="/tags/es6/" style="font-size: 1.15em; color: rgb(97, 48, 41)">es6</a><a href="/tags/css/" style="font-size: 1.15em; color: rgb(132, 109, 59)">css</a><a href="/tags/linux/" style="font-size: 1.24em; color: rgb(197, 151, 179)">linux</a><a href="/tags/shell/" style="font-size: 1.18em; color: rgb(5, 6, 15)">shell</a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.15em; color: rgb(63, 110, 55)">正则表达式</a><a href="/tags/docker/" style="font-size: 1.27em; color: rgb(28, 179, 44)">docker</a><a href="/tags/go/" style="font-size: 1.21em; color: rgb(133, 170, 112)">go</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/08/"><span class="card-archive-list-date">八月 2021</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">130</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-04-29T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">544.3k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-03-19T05:29:35.621Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By naive</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "今日事&#44;今日畢,Never put off till tomorrow what you can do today".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '今日事&#44;今日畢'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>