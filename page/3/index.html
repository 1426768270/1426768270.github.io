<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>naive的博客</title><meta name="author" content="naive"><meta name="copyright" content="naive"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="欢迎访问naive的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="naive的博客">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="naive的博客">
<meta property="og:description" content="欢迎访问naive的博客">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="naive">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/page/3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'naive的博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2022-04-04 17:10:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="naive的博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">137</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('/./img/preview.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">naive的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">naive的博客</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/1426768270" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:liuqi8270@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/" title="设计模式-模板模式">     <img class="post_bg" src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式-模板模式"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/10/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/" title="设计模式-模板模式">设计模式-模板模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-10T01:36:49.000Z" title="发表于 2022-01-10 09:36:49">2022-01-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span></div><div class="content">模板模式案例1234编写制作豆浆的程序，说明如下:1)制作豆浆的流程选材---&gt;添加配料---&gt;浸泡---&gt;放到豆浆机打碎2)通过添加不同的配料，可以制作出不同口味的豆浆3)选材、浸泡和放到豆浆机打碎这几个步骤对于制作每种口味的豆浆都是一样的

基本介绍
模板方法模式（Template Method Pattern)，又叫模板模式(Template Pattern)，在一个抽象类公开定义了执行它的方法的模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。
简单说，模板方法模式定义一个操作中的算法的骨架，而将一些步骤延迟到子类中，使得子类可以不改变一个算法的结构，就可以重定义该算法的某些特定步骤
这种类型的设计模式属于行为型模式。



角色

AbstractClass抽象类，类中实现了模板方法，定义了算法的骨架，具体子类需要去实现其它的抽象方法
ConcreteClass 实现抽象方法，以完成算法中子类的步骤

解决问题制作模板，实现共有的方法,把特定方法放到子类实现
123456789101112131415161718192021222324 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2022/01/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" title="设计模式-享元模式">     <img class="post_bg" src="/./img/photo-1626811407568-2f41c53fff99.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式-享元模式"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F/" title="设计模式-享元模式">设计模式-享元模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-07T08:18:46.000Z" title="发表于 2022-01-07 16:18:46">2022-01-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span></div><div class="content">享元模式案例1234小型的外包项目，给客户A做一个产品展示网站，客户A的朋友感觉效果不错，也希望做这样的产品展示网站，但是要求都有些不同1)有客户要求以新闻的形式发布2)有客户人要求以博客的形式发布3)有客户希望以微信公众号的形式发布

传统方式的解决方法直接复制粘贴一份，然后根据客户不同要求，进行定制修改给每个网站租用一个空间
问题
需要的网站结构相似度很高，而且都不是高访问量网站，如果分成多个虚拟空间来处理，相当于一个相同网站的实例对象很多，造成服务器的资源浪费
解决思路:整合到一个网站中，共享其相关的代码和数据，对于硬盘、内存、CPU、数据库空间等服务器资源都可以达成共享，减少服务器资源
对于代码来说，由于是一份实例,维护和扩展都更加容易
上面的解决思路就可以使用享元模式来解决

基本介绍
享元模式( Flyweight Pattern）也叫蝇量模式:运用共享技术有效地支持大量细粒度的对象
常用于系统底层开发，解决系统的性能问题。像数据库连接池,里面都是创建好的连接对象，在这些连接对象中有我们需要的则直接拿来用，避免重新创建，如果没有我们需要的，则创建一个
享元模式能够解决重复对 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2022/01/05/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" title="设计模式-外观模式">     <img class="post_bg" src="/./img/photo-1465188162913-8fb5709d6d57.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="设计模式-外观模式"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/05/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" title="设计模式-外观模式">设计模式-外观模式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-01-05T08:20:33.000Z" title="发表于 2022-01-05 16:20:33">2022-01-05</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span></div><div class="content">外观模式案例123456789101112组建—家庭影院:DVD播放器、投影仪、自动屏幕、环绕立体声、爆米花机,要求完成使用家庭影院的功能，其过程为:·直接用遥控器:统筹各设备开关·开爆米花机·放下屏幕·开投影仪。·开音响·开DVD,选dvd。·去拿爆米花·调陪灯光·播放·观影结束后,关闭各种设备

传统方式的解决方法1234567ClientTest &#123;	public static void main(String args[])&#123;        //1.创建相关对象        //2.调用创建的各个对象的一系列方法        //3.调用DVDPlayer对象的play方法    &#125;&#125;

传统方式解决影院管理问题

在ClientTest的main方法中，创建各个子系统的对象，并直接去调用子系统(对象)相关方法，会造成调用过程混乱，没有清晰的过程
不利于在ClientTest 中，去维护对子系统的操作
解决思路:定义一个高层接口，给子系统中的一组接口提供一个一致的界面(比如在高层接口提供四个方法ready, play, pause,e ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/12/24/%E6%A1%86%E6%9E%B6/security/OAuth/" title="OAuth">     <img class="post_bg" src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="OAuth"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/24/%E6%A1%86%E6%9E%B6/security/OAuth/" title="OAuth">OAuth</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-24T07:06:49.000Z" title="发表于 2021-12-24 15:06:49">2021-12-24</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">一、OAuth2.0介绍OAuth（开放授权）是一个开放标准，允许用户授权第三方应用访问他们存储在另外的服务提供者上的信息，而不 需要将用户名和密码提供给第三方应用或分享他们数据的所有内容
通过例子去理解OAuth2.0协议的认证流程：
用户借助微信认证登录网站，用户就不用单独在网站注册用户，怎么样算认证成功吗？网站需要成功从微信获取用户的身份信息则认为用户认证成功，那如何从微信获取用户的身份信息？用户信息的拥有者是用户本人，微信需要经过用户的同意方可为网站生成令牌，网站拿此令牌方可从微信获取用户的信息。 

客户端请求第三方授权 ，点击微信的图标以微信账号登录系统，用户是自己在微信里信息的资源拥有者。 
资源拥有者同意给客户端授权 ， 验证通过后，微 信会询问用户是否给授权访问自己的微信数据，用户点击“确认登录”表示同意授权，微信认证服务器会颁发一个授权码，并重定向到网站。 
客户端获取到授权码，请求认证服务器申请令牌，客户端应用程序请求认证服务器，请求携带授权码。 
认证服务器向客户端响应令牌，微信认证服务器验证了客户端请求的授权码，如果合法则给客户端颁发令牌，令牌是客户端访问资源 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/12/12/%E6%A1%86%E6%9E%B6/security/SpringSecurity%E5%8E%9F%E7%90%86/" title="SpringSecurity原理">     <img class="post_bg" src="/./img/photo-1625777719130-0a8e07086117.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringSecurity原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/12/12/%E6%A1%86%E6%9E%B6/security/SpringSecurity%E5%8E%9F%E7%90%86/" title="SpringSecurity原理">SpringSecurity原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-12-12T07:57:05.000Z" title="发表于 2021-12-12 15:57:05">2021-12-12</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">一、SpringSecurity 的过滤器介绍采用的是责任链的设计模式，它有一条很长的过滤器链。

WebAsyncManagerIntegrationFilter：将 Security 上下文与 Spring Web 中用于处理异步请求映射的 WebAsyncManager 进行集成。

SecurityContextPersistenceFilter：在每次请求处理之前将该请求相关的安全上下文信息加载到 SecurityContextHolder 中，然后在该次请求处理完成之后，将SecurityContextHolder 中关于这次请求的信息存储到一个“仓储”中，然后将SecurityContextHolder 中的信息清除，例如在 Session 中维护一个用户的安全信息就是这个过滤器处理的。

HeaderWriterFilter：用于将头信息加入响应中。

CsrfFilter：用于处理跨站请求伪造。

LogoutFilter：用于处理退出登录。

UsernamePasswordAuthenticationFilter：用于处理基于表单的登录请求，从表单中获取用户名和密 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/28/%E6%A1%86%E6%9E%B6/security/SpringSecurity%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9D%83%E9%99%90/" title="SpringSecurity微服务权限">     <img class="post_bg" src="/./img/photo-1442522772768-9032b6d10e3e.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringSecurity微服务权限"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/28/%E6%A1%86%E6%9E%B6/security/SpringSecurity%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9D%83%E9%99%90/" title="SpringSecurity微服务权限">SpringSecurity微服务权限</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-28T10:04:21.000Z" title="发表于 2021-11-28 18:04:21">2021-11-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">一、微服务是什么由来微服务架构风格是一种使用一套小服务来开发单个应用的方式途径，每个服务运行在自己的进程中，并使用轻量级机制通信，通常是 HTTP API，这些服务基于业务能力构建，并能够通过自动化部署机制来独立部署，这些服务使用不同的编程语言实现，以及不同数据存储技术，并保持最低限度的集中式管理。 
微服务优势
微服务每个模块就相当于一个单独的项目，代码量明显减少，遇到问题也相对来说比较好解决。
微服务每个模块都可以使用不同的存储方式（比如有的用 redis，有的用 mysql等），数据库也是单个模块对应自己的数据库。
微服务每个模块都可以使用不同的开发技术，开发模式更灵活。

微服务本质微服务，关键其实不仅仅是微服务本身，而是系统要提供一套基础的架构，这种架构使得微服务可以独立的部署、运行、升级，不仅如此，这个系统架构还让微服务与微服务之间在结构上“松耦合”，而在功能上则表现为一个统一的整体。这种所谓的“统一的整体”表现出来的是统一风格的界面，统一的权限管理，统一的安全策略，统一的上线过程，统一的日志和审计方法，统一的调度方式，统一的访问入口等等。
微服务的目的是有效的拆分应用，实 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/14/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/" title="集群安全机制">     <img class="post_bg" src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="集群安全机制"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/14/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/%E9%9B%86%E7%BE%A4%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6/" title="集群安全机制">集群安全机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-14T13:16:00.000Z" title="发表于 2021-11-14 21:16:00">2021-11-14</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概述kubernetes通过API Server 的认证授权、准入控制机制及保护敏感信息的 Secret 机制等。
有以下几个目标：

保证容器与其所在的宿主机的隔离。
限制容器给基础设施及其他容器带来消极影响的能力。
最小权限原则一一合理限制所有组件的权限，确保组件只执行它被授权的行为，通过限制单个组件的能力来限制它所能到达的权限范围。
明确组件间边界的划分。
划分普通用户和管理员的角色。
在必要时允许将管理员权限赋给普通用户。
允许拥有“ Secret ”数据（ Keys Certs Passwords ）的应用在集群中运行。

二、API Server 认证管理（Authentication)Kubernetes 集群中所有资源的访问和变更都是通过kubernetes API Server 的REST API 来实现的，所以集群安全的关键点就在于如何识别并认证客户端身份（ Authentication ），以及随后访问权限的授权（ Authorization ）
Kubernetes 集群提供了3种级别的客户端身份认证方式。

HTTPS 证书认证：基于 CA 根证书签名的双 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/11/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kube-proxy%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kube-proxy运行机制分析">     <img class="post_bg" src="/./img/photo-1625777719130-0a8e07086117.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kube-proxy运行机制分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/11/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kube-proxy%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kube-proxy运行机制分析">kube-proxy运行机制分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-11T14:36:55.000Z" title="发表于 2021-11-11 22:36:55">2021-11-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、概念Kubernetes 在创建服务时会为服务分配一个虚拟的IP地址，客户端通过访问这个虚拟的 IP地址来访问服务，而服务则负责将请求转发到后端的 Pod 上。这就是 个反向代理。但是，它和普通的反向代理有一些不同：首先它的IP地址是虚拟的，想从外面访问还需要一些技巧；其次是它的部署和启停是 Kubernetes 统一自动管理的。
真正将 Service 的作用落实的是背后的 kube-proxy 服务进程。
Kubernetes 集群的每个 Node 上都会运行一个 kube-proxy 服务进程，这个进程可以看作Service 的透明代理兼负载均衡器，其核心功能是将到某个 Service 的访问请求转发到后端的Pod 实例上。对每一个 TCP 类型的 Kubernetes Service, kube-proxy 都会在本地 Node 上建一个 SocketServer 来负责接收请求，然后均匀发送到后端某个 Pod 的端口上，这个过程默认采Round Robin 负载均衡算法。另外 Kubernetes 也提供通过修改 Service 的 service.spec.sessio ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kubelet%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kubelet运行机制分析">     <img class="post_bg" src="/./img/photo-1442522772768-9032b6d10e3e.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="kubelet运行机制分析"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/kubelet%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%88%86%E6%9E%90/" title="kubelet运行机制分析">kubelet运行机制分析</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-08T15:19:17.000Z" title="发表于 2021-11-08 23:19:17">2021-11-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、简介每个 Node 节点（又称 Minion ）上都会启动 kubelet 服务进程。该进程用于处理 Master 节点下发到本节点的任务，管理 Pod及Pod 中的容器。每个Kubelet会在 API Server 上注册节点自身信息，定期向 Master 节点汇报节点资源的使用情况，并通过cAdvisor 监控容器和节点资源。
二、节点管理点通过设置 kubelet 启动参数--register-node ，来决定是否向 API Server 注册自己.注册时包括以下参数

--api-servers: API Server 的位置。
--kubeconfig: kubeconfig 文件，用于访问 API Server 的安全配置文件
--cloud-provider ：云服务商IaaS地址，仅用于公有云环境

每个 kubelet 被授予创建和修改任何节点的权限。但是在实践中，它仅仅创建和修改自己。
三、Pod管理kubelet 通过以下几种方式获取自身 Node 上所要运行的 Pod 清单。

文件： kubelet 启动参数 “--config ”指定的配置文件目录下的 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Scheduler%E5%8E%9F%E7%90%86/" title="Scheduler原理">     <img class="post_bg" src="/./img/photo-1625777719130-0a8e07086117.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Scheduler原理"></a></div><div class="recent-post-info"><a class="article-title" href="/2021/11/08/%E4%BA%91%E5%8E%9F%E7%94%9F/kubernetes/Scheduler%E5%8E%9F%E7%90%86/" title="Scheduler原理">Scheduler原理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-11-08T13:26:48.000Z" title="发表于 2021-11-08 21:26:48">2021-11-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/">云原生</a></span></div><div class="content">一、简介Scheduler 在整个系统中承担了“承上启下”的重要功能，“承上”是指它负则接收Controller Manager 创建的新 Pod，为它找到目标Node ，“启下”是指安置工作完成后，目标 Node 上的 kubelet 务进程接管后继工作，负 Pod 生命周期中的“下半生”
Scheduler 的作用是将待调度的 Pod (API 新创建的 Pod 、ControllerManager 为补足副本而创建的 Pod 等）按照特定的调度算法和调度策略绑定（ Binding ）到集群中的某个合适的 Node 上，并将绑定信息写入 etcd 中。在整个调度过程中涉及 3个对象，分别是：待调度 Pod 列表、可用 Node 列表，以及调度算法和策略 。简单地说，就是通过调度算法调度为待调度 Pod 列表的每个 Pod 从Node 列表中选择一个最适合的 Node，随后目标节点上的kubelet通过API Server监听到Pod的绑定事件，获取对应Pod清单，下载Image,启动容器。


二、调度流程
预选调度过程，即遍历所有目标 Node ，筛选出符合要求的候选节点。
确定 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/2/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/#content-inner">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/#content-inner">14</a><a class="extend next" rel="next" href="/page/4/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">naive</div><div class="author-info__description">欢迎访问naive的博客</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">137</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/1426768270"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/1426768270" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:liuqi8270@foxmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到navie的博客</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/04/%E5%85%B6%E4%BB%96/markdown%E8%AF%AD%E6%B3%95/" title="markdown语法"><img src="/./img/photo-1626427832435-d6c500cc2686.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="markdown语法"/></a><div class="content"><a class="title" href="/2022/04/04/%E5%85%B6%E4%BB%96/markdown%E8%AF%AD%E6%B3%95/" title="markdown语法">markdown语法</a><time datetime="2022-04-04T08:30:52.000Z" title="发表于 2022-04-04 16:30:52">2022-04-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/30/%E6%A1%86%E6%9E%B6/Mybatis%E5%8E%9F%E7%90%86/" title="Mybatis原理"><img src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis原理"/></a><div class="content"><a class="title" href="/2022/03/30/%E6%A1%86%E6%9E%B6/Mybatis%E5%8E%9F%E7%90%86/" title="Mybatis原理">Mybatis原理</a><time datetime="2022-03-30T14:56:26.000Z" title="发表于 2022-03-30 22:56:26">2022-03-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/27/%E5%88%86%E5%B8%83%E5%BC%8F/zookeeper%E6%BA%90%E7%A0%81/" title="zookeeper源码"><img src="/./img/photo-1626277787644-47d530591292.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="zookeeper源码"/></a><div class="content"><a class="title" href="/2022/03/27/%E5%88%86%E5%B8%83%E5%BC%8F/zookeeper%E6%BA%90%E7%A0%81/" title="zookeeper源码">zookeeper源码</a><time datetime="2022-03-27T05:53:21.000Z" title="发表于 2022-03-27 13:53:21">2022-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/26/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/" title="分布式算法"><img src="/./img/photo-1626277787644-47d530591292.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式算法"/></a><div class="content"><a class="title" href="/2022/03/26/%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95/" title="分布式算法">分布式算法</a><time datetime="2022-03-26T14:35:14.000Z" title="发表于 2022-03-26 22:35:14">2022-03-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/22/%E5%88%86%E5%B8%83%E5%BC%8F/zookeeper%E7%AE%80%E4%BB%8B/" title="zookeeper简介"><img src="/./img/photo-1465156799763-2c087c332922.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="zookeeper简介"/></a><div class="content"><a class="title" href="/2022/03/22/%E5%88%86%E5%B8%83%E5%BC%8F/zookeeper%E7%AE%80%E4%BB%8B/" title="zookeeper简介">zookeeper简介</a><time datetime="2022-03-22T14:37:09.000Z" title="发表于 2022-03-22 22:37:09">2022-03-22</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Go/"><span class="card-category-list-name">Go</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Vue/"><span class="card-category-list-name">Vue</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/java%E5%9F%BA%E7%A1%80/"><span class="card-category-list-name">java基础</span><span class="card-category-list-count">19</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/leetcode/"><span class="card-category-list-name">leetcode</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/"><span class="card-category-list-name">中间件</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"><span class="card-category-list-name">云原生</span><span class="card-category-list-count">20</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%85%B6%E4%BB%96/"><span class="card-category-list-name">其他</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/"><span class="card-category-list-name">分布式</span><span class="card-category-list-count">3</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size: 1.45em; color: rgb(191, 152, 167)">java</a><a href="/tags/jvm/" style="font-size: 1.34em; color: rgb(47, 97, 38)">jvm</a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.31em; color: rgb(104, 12, 179)">多线程</a><a href="/tags/java%E9%9B%86%E5%90%88/" style="font-size: 1.23em; color: rgb(146, 78, 164)">java集合</a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.29em; color: rgb(23, 2, 184)">前端</a><a href="/tags/html/" style="font-size: 1.15em; color: rgb(6, 84, 140)">html</a><a href="/tags/redis/" style="font-size: 1.18em; color: rgb(32, 43, 9)">redis</a><a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 1.15em; color: rgb(154, 175, 32)">读书笔记</a><a href="/tags/hadoop/" style="font-size: 1.15em; color: rgb(132, 59, 14)">hadoop</a><a href="/tags/mysql/" style="font-size: 1.23em; color: rgb(144, 41, 107)">mysql</a><a href="/tags/springboot/" style="font-size: 1.15em; color: rgb(7, 162, 187)">springboot</a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.15em; color: rgb(12, 64, 153)">注解</a><a href="/tags/shiro/" style="font-size: 1.15em; color: rgb(92, 184, 66)">shiro</a><a href="/tags/swagger2/" style="font-size: 1.15em; color: rgb(157, 13, 113)">swagger2</a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.42em; color: rgb(134, 32, 118)">设计模式</a><a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 1.29em; color: rgb(124, 3, 174)">笔记</a><a href="/tags/SpringSecurity/" style="font-size: 1.23em; color: rgb(115, 120, 117)">SpringSecurity</a><a href="/tags/git/" style="font-size: 1.18em; color: rgb(35, 96, 183)">git</a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.15em; color: rgb(69, 54, 79)">算法</a><a href="/tags/%E7%AE%97%E6%B3%95%E5%BC%8F/" style="font-size: 1.15em; color: rgb(200, 97, 83)">算法式</a><a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 1.15em; color: rgb(189, 36, 120)">网络</a><a href="/tags/Vue%E5%9F%BA%E7%A1%80/" style="font-size: 1.23em; color: rgb(124, 66, 115)">Vue基础</a><a href="/tags/jQuery/" style="font-size: 1.15em; color: rgb(94, 184, 15)">jQuery</a><a href="/tags/SpringCloud/" style="font-size: 1.15em; color: rgb(27, 39, 27)">SpringCloud</a><a href="/tags/ActiveMQ/" style="font-size: 1.15em; color: rgb(37, 136, 43)">ActiveMQ</a><a href="/tags/k8s/" style="font-size: 1.37em; color: rgb(43, 10, 192)">k8s</a><a href="/tags/%E5%AE%B9%E5%99%A8%E4%BA%91/" style="font-size: 1.4em; color: rgb(106, 131, 183)">容器云</a><a href="/tags/TypeScript/" style="font-size: 1.15em; color: rgb(37, 58, 76)">TypeScript</a><a href="/tags/vue3/" style="font-size: 1.15em; color: rgb(98, 12, 29)">vue3</a><a href="/tags/axios/" style="font-size: 1.15em; color: rgb(41, 147, 72)">axios</a><a href="/tags/es6/" style="font-size: 1.15em; color: rgb(66, 23, 131)">es6</a><a href="/tags/css/" style="font-size: 1.15em; color: rgb(20, 47, 116)">css</a><a href="/tags/linux/" style="font-size: 1.26em; color: rgb(101, 41, 97)">linux</a><a href="/tags/shell/" style="font-size: 1.18em; color: rgb(104, 135, 65)">shell</a><a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 1.15em; color: rgb(67, 28, 10)">正则表达式</a><a href="/tags/docker/" style="font-size: 1.29em; color: rgb(1, 177, 172)">docker</a><a href="/tags/go/" style="font-size: 1.26em; color: rgb(138, 168, 159)">go</a><a href="/tags/zookeeper/" style="font-size: 1.2em; color: rgb(155, 56, 168)">zookeeper</a><a href="/tags/mybatis/" style="font-size: 1.15em; color: rgb(22, 56, 164)">mybatis</a><a href="/tags/Spring/" style="font-size: 1.18em; color: rgb(8, 124, 159)">Spring</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/04/"><span class="card-archive-list-date">四月 2022</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/03/"><span class="card-archive-list-date">三月 2022</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/02/"><span class="card-archive-list-date">二月 2022</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/01/"><span class="card-archive-list-date">一月 2022</span><span class="card-archive-list-count">14</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/12/"><span class="card-archive-list-date">十二月 2021</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/11/"><span class="card-archive-list-date">十一月 2021</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/10/"><span class="card-archive-list-date">十月 2021</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">九月 2021</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">137</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-04-29T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">567.1k</div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2022-04-04T09:10:45.355Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By naive</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  if (true) { 
    var typed = new Typed("#subtitle", {
      strings: "今日事&#44;今日畢,Never put off till tomorrow what you can do today".split(","),
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50
    })
  } else {
    document.getElementById("subtitle").innerHTML = '今日事&#44;今日畢'
  }
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>